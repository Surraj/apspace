<ion-header>
  <ion-navbar color='primary'>
    <ion-title>Events</ion-title>
  </ion-navbar>
</ion-header>

<ion-content parallax-header>
  <ion-refresher pullMax="400" pullMin="60" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <div class="cover header-image">
    <h1 class="events">EVENTS</h1>
  </div>
  <div class="main-content">
    <ion-item>Upcoming Classes</ion-item>

    <ng-container *ngIf="isLoading">
      <ion-item *ngFor="let i of numOfSkeletons">
        <skeleton-item height="137px" width="100%"></skeleton-item>
      </ion-item>
    </ng-container>

    <ng-template let-classes [ngIf]='upcomingClass$ | async' [ngIfElse]='noclasses'>
      <ion-card *ngFor='let c of classes'>
        <ion-card-header>
          {{ c.SUBJECT_CODE }}
        </ion-card-header>
        <ion-card-content>
          <ion-label no-margin>
            <ion-icon padding-right name="time"></ion-icon>
            <b>{{ c.TIME_FROM }}</b> -
            <b>{{ c.TIME_TO }}</b>
          </ion-label>
          <ion-label no-margin>
            <ion-icon padding-right name="locate"></ion-icon>
            {{ c.ROOM }} â”‚ {{ c.LOCATION }}
          </ion-label>
          <ion-label no-margin>
            <a (click)="openStaffDirectoryInfo(c.SAMACCOUNTNAME)">
              <ion-icon padding-right name="contact"></ion-icon>
              {{ c.LECTURER_NAME }}
            </a>
          </ion-label>
        </ion-card-content>
      </ion-card>
    </ng-template>
    <ng-template #noclasses>
      <ion-card padding>
        <ion-note>You have no upcoming class for today</ion-note>
      </ion-card>
    </ng-template>

    <ion-item>Upcoming Holiday</ion-item>
    <ng-template let-holiday [ngIf]="holidays" [ngIfElse]='noholidays'>
      <ion-card *ngFor='let h of holiday'>
        <ion-item>
          {{ h.holiday_name }}
          <ion-note item-right> ({{ h.holiday_start_date }}) - ({{ h.holiday_end_date }})</ion-note>
        </ion-item>
        <ion-card-content>
          {{ h.holiday_description }}
        </ion-card-content>
      </ion-card>
    </ng-template>
    <ng-template #noholidays>
      <ion-card padding>
        <ion-note>You have no upcoming holidays</ion-note>
      </ion-card>
    </ng-template>

    <ion-item>Total Overdue Fee</ion-item>
    <ion-card>
      <chart margin-top [type]="type" [data]="data" [options]="options"></chart>
    </ion-card>

    <ion-item>Upcoming Exams</ion-item>
    <ng-template let-exam [ngIf]='exam$ | async'>
      <ion-card tappable *ngFor='let e of exam' (click)='openExamPage()'>
        <ion-item>{{ e.module }}
          <p item-right> {{ e.since | date:'medium'}}</p>
        </ion-item>
      </ion-card>
    </ng-template>
    <ng-template [ngIf]='!exam'>
      <ion-card padding>
        <ion-note>You have no upcoming exams</ion-note>
      </ion-card>
    </ng-template>

  </div>
</ion-content>