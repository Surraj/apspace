<ion-content>
  <div class="ion-margin">
    <div class="ion-text-center ion-margin-bottom">
      <h4>Report a Problem</h4>
      <h6 class="secondary-txt-color">Your feedback helps us to improve APSpace</h6>
    </div>
    
    <app-message-with-svg
      messageTitle=""
      messageContent="" 
      imageUrl="assets/img/feedback.svg"
      wrapperOffset="3" 
      wrapperSize="6"
    >
    </app-message-with-svg>

    <div class="feedback-form">
      <ion-item lines="none">
        <ion-label position="stacked">Message:</ion-label>
        <ion-textarea class="form-input" autosize rows="3" [(ngModel)]="message"
          (ngModelChange)="onMessageFieldChange($event)" required="true"></ion-textarea>
      </ion-item>

      <ion-item lines="none">
        <ion-label position="stacked">Contact Number: <small>(Optional)</small></ion-label>
        <ion-input class="form-input" type="text" [(ngModel)]="contactNo" (ngModelChange)="onPhoneNumberChange()">
        </ion-input>
      </ion-item>
      <div class="ion-padding-start ion-padding-end">
        <small *ngIf="contactNo && !phoneNumberValid" class="danger-text">Phone
          number is invalid. Please check the
          number and enter a correct phone number (Exactly 10 or 11 digits)
        </small>
      </div>

      <div class="ion-padding">
        <ion-button expand="full" class="colored-background" (click)="submitFeedback()"
          [disabled]="!message || (!phoneNumberValid && contactNo !== '')">
          Submit
        </ion-button>
      </div>
    </div>
  </div>
</ion-content>

<ion-footer>
  <div style="margin: 0px 20px 0px;">
    <ion-grid class="ion-no-padding">
      <ion-row>
        <ion-col size="12">
          <p>
            Attachment(s):
            <ion-button [color]="showImage ? 'danger' : 'primary'" size="small" (click)="toggleImage()">
              <ion-icon button [name]="showImage ? 'remove' : 'add'"></ion-icon>
            </ion-button>
          </p>
        </ion-col>
        <ion-col size="12">
          <ion-slides #slides pager="true" [options]="screenshotSliderOpts" *ngIf="showImage" @slideLeft>
            <ion-slide *ngFor="let img of images; let i = index">
              <ion-button [color]="'danger'" size="small" (click)="removeImage(img)" style="position: absolute !important;">
                <ion-icon button [name]="'trash'"></ion-icon>
              </ion-button>
              <ion-img *ngIf="showImage" [src]="img"></ion-img>
            </ion-slide>
          </ion-slides>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-footer>
<!-- 

To be added in the future (Categories)
- Will confirm with Reza

-->