<ion-header>
  <ion-toolbar>
    <ion-title>iGraduate</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
  <ion-toolbar>
    <ion-segment class="ion-padding" [(ngModel)]="selectedSegment" (ngModelChange)="segmentValueChanged()">
      <ion-segment-button value="studentsList">Students List</ion-segment-button>
      <ion-segment-button value="exceptions">Exceptions</ion-segment-button>
      <ion-segment-button value="report">Report</ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ng-container [ngSwitch]='selectedSegment'>
    <ng-container *ngSwitchCase="'studentsList'">
      <ion-grid class="ion-no-padding">
        <ion-row>
          <ion-col>
            <ion-searchbar placeholder="Student ID" [(ngModel)]="idToSearch"></ion-searchbar>
          </ion-col>
          <ion-col class="ion-no-padding" size="12" size-md="12">
            <ion-card class="table-background">
              <ion-card-content class="ion-no-padding">
                <ng-container *ngIf="studentsList$ | async as students; else loadingStudentsList">
                  <ion-item class="h-mobile-d-desktop table-item">
                    <ion-grid class="ion-no-margin ion-no-padding">
                      <ion-row>
                        <ion-col size="12" size-md="2">
                          <h2 class="text-bold">TP No.</h2>
                        </ion-col>
                        <ion-col size="12" size-md="4">
                          <h2 class="text-bold">Student Name</h2>
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <h2 class="text-bold">1<sup>st</sup> Attempt</h2>
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <h2 class="text-bold">2<sup>nd</sup> Attempt</h2>
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <h2 class="text-bold">Reset</h2>
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <h2 class="text-bold">Reset Date</h2>
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <h2 class="text-bold">Collection</h2>
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <h2 class="text-bold">Size</h2>
                        </ion-col>
                      </ion-row>
                    </ion-grid>
                  </ion-item>
                  <ng-container *ngIf="students.length > 0; else noStudents">
                    <ion-list class="ion-no-padding">
                      <ion-item detail button class="table-item" *ngFor="let student of students | filter: idToSearch"
                        (click)="openStudentDetailModal(student.id)">
                        <ion-grid>
                          <ion-row class="table-data">
                            <ion-col size="12" size-md="2" class="text-bold special-border colored-border">
                              {{ student.id }}
                            </ion-col>
                            <ion-col size="12" size-md="4">
                              <!-- <span class="marker">Grade: </span> -->
                              {{ student.student_name }}
                            </ion-col>
                            <ion-col size="12" size-md="1">
                              <!-- <span class="marker">Grade Point: </span> -->
                              {{ (student.first_attempt_date | date : 'EEE, dd MMM yyyy') || 'N/A' }}
                            </ion-col>
                            <ion-col size="12" size-md="1">
                              <!-- <span class="marker">Internal Result: </span> -->
                              {{ (student.second_attempt_date| date : 'EEE, dd MMM yyyy') || 'N/A' }}
                            </ion-col>
                            <ion-col size="12" size-md="1">
                              <!-- <span class="marker">Internal Result: </span> -->
                              {{ student.reset || 'N/A' }}
                            </ion-col>
                            <ion-col size="12" size-md="1">
                              {{ (student.reset_date| date : 'EEE, dd MMM yyyy') || 'N/A' }}
                            </ion-col>
                            <ion-col size="12" size-md="1">
                              <!-- <span class="marker">Internal Result: </span> -->
                              {{ (student.collection_date | date : 'EEE, dd MMM yyyy') || 'N/A' }}
                            </ion-col>
                            <ion-col size="12" size-md="1">
                              <!-- <span class="marker">Internal Result: </span> -->
                              {{ student.tshirt_size || 'N/A' }}
                            </ion-col>
                          </ion-row>
                        </ion-grid>
                      </ion-item>
                    </ion-list>
                  </ng-container>
                  <ng-template #noStudents>
                    No Students
                  </ng-template>
                </ng-container>
                <ng-template #loadingStudentsList>
                  loading
                </ng-template>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ng-container>


    <ng-container *ngSwitchCase="'exceptions'">
      <ion-grid class="ion-no-padding">
        <ion-row>
          <ion-col>
            <ion-item lines="none">
              <ion-input class="form-input" type="text" placeholder="Student ID" [(ngModel)]="studentIDException">
                <!-- <ion-buttons slot="end"> -->
                <!-- </ion-buttons> -->
                <ion-button class="success-border success-text" style="position: absolute;right: 5px;" expand="block"
                  fill="outline" slot="end">add</ion-button>
              </ion-input>
            </ion-item>
          </ion-col>
          <ion-col class="ion-no-padding" size="12" size-md="12">
            <ion-card class="table-background">
              <ion-card-content class="ion-no-padding">
                <ng-container *ngIf="exceptionsList$ | async as exceptions; else loadingExceptions">
                  <ion-item class="h-mobile-d-desktop table-item">
                    <ion-grid class="ion-no-margin ion-no-padding">
                      <ion-row>
                        <ion-col size="12" size-md="3">
                          <h2 class="text-bold">TP No.</h2>
                        </ion-col>
                        <ion-col size="12" size-md="9">
                          <h2 class="text-bold">Creation Date</h2>
                        </ion-col>
                      </ion-row>
                    </ion-grid>
                  </ion-item>
                  <ng-container *ngIf="exceptions.length > 0; else emptyExceptions">
                    <ion-list class="ion-no-padding">
                      <ion-item class="table-item" *ngFor="let exception of exceptions">
                        <ion-grid>
                          <ion-row class="table-data">
                            <ion-col size="12" size-md="3" class="text-bold special-border colored-border">
                              TP037354
                            </ion-col>
                            <ion-col size="12" size-md="9">
                              <!-- <span class="marker">Grade: </span> -->
                              Mon, 09 Oct 2017 18:00:46
                            </ion-col>
                          </ion-row>
                        </ion-grid>
                      </ion-item>
                    </ion-list>
                  </ng-container>
                  <ng-template #emptyExceptions>
                    Empty
                  </ng-template>
                </ng-container>
                <ng-template #loadingExceptions>
                  Loading ...
                </ng-template>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>

    </ng-container>
    <ng-container *ngSwitchCase="'report'">
      <ion-grid class="ion-no-padding">
        <ion-row>
          <ion-col class="ion-no-padding" size="12" size-md="12">
            <ion-card class="table-background">
              <ion-card-content class="ion-no-padding">
                <ion-item class="h-mobile-d-desktop table-item">
                  <ion-grid class="ion-no-margin ion-no-padding">
                    <ion-row>
                      <ion-col size="12" size-md="5">
                        <h2 class="text-bold">Date</h2>
                      </ion-col>
                      <ion-col size="12" size-md="1">
                        <h2 class="text-bold">XS</h2>
                      </ion-col>
                      <ion-col size="12" size-md="1">
                        <h2 class="text-bold">S</h2>
                      </ion-col>
                      <ion-col size="12" size-md="1">
                        <h2 class="text-bold">M</h2>
                      </ion-col>
                      <ion-col size="12" size-md="1">
                        <h2 class="text-bold">L</h2>
                      </ion-col>
                      <ion-col size="12" size-md="1">
                        <h2 class="text-bold">XL</h2>
                      </ion-col>
                      <ion-col size="12" size-md="1">
                        <h2 class="text-bold">XXL</h2>
                      </ion-col>
                      <ion-col size="12" size-md="1">
                        <h2 class="text-bold">XXXL</h2>
                      </ion-col>
                    </ion-row>
                  </ion-grid>
                </ion-item>
                <ion-list class="ion-no-padding">
                  <ion-item class="table-item">
                    <ion-grid>
                      <ion-row class="table-data">
                        <ion-col size="12" size-md="5" class="text-bold special-border colored-border">
                          2019-11-05
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Grade: </span> -->
                          1
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Grade Point: </span> -->
                          999
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Internal Result: </span> -->
                          8
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Internal Result: </span> -->
                          2
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Internal Result: </span> -->
                          -
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Internal Result: </span> -->
                          -
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Internal Result: </span> -->
                          1
                        </ion-col>
                      </ion-row>
                    </ion-grid>
                  </ion-item>
                  <ion-item class="table-item">
                    <ion-grid>
                      <ion-row class="table-data">
                        <ion-col size="12" size-md="5" class="text-bold special-border colored-border">
                          2019-11-05
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Grade: </span> -->
                          1
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Grade Point: </span> -->
                          999
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Internal Result: </span> -->
                          8
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Internal Result: </span> -->
                          2
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Internal Result: </span> -->
                          -
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Internal Result: </span> -->
                          -
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Internal Result: </span> -->
                          1
                        </ion-col>
                      </ion-row>
                    </ion-grid>
                  </ion-item>
                  <ion-item class="table-item">
                    <ion-grid>
                      <ion-row class="table-data">
                        <ion-col size="12" size-md="5" class="text-bold special-border colored-border">
                          2019-11-05
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Grade: </span> -->
                          1
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Grade Point: </span> -->
                          999
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Internal Result: </span> -->
                          8
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Internal Result: </span> -->
                          2
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Internal Result: </span> -->
                          -
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Internal Result: </span> -->
                          -
                        </ion-col>
                        <ion-col size="12" size-md="1">
                          <!-- <span class="marker">Internal Result: </span> -->
                          1
                        </ion-col>
                      </ion-row>
                    </ion-grid>
                  </ion-item>
                </ion-list>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ng-container>
  </ng-container>
</ion-content>